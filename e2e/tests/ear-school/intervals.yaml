appId: com.nagodasoft.scalescholar
---
# Test: Intervals exercise full flow
# This test verifies:
# - Navigation to intervals exercise
# - All answer buttons are visible (catches iPad overflow bugs)
# - Play/answer/feedback cycle works
# - Session completion

- launchApp:
    clearState: true

# Navigate to Ear School
- tapOn:
    id: "ear-school-card"

- assertVisible:
    id: "ear-school-header-title"

# Tap Intervals exercise
- tapOn:
    id: "intervals-card"

# Verify exercise screen loaded
- assertVisible:
    id: "intervals-header-title"

# Verify close button is present
- assertVisible:
    id: "intervals-close-button"

# Verify progress indicator (starts at 1/10)
- assertVisible:
    id: "progress-indicator"

# Verify PLAY button is visible
- assertVisible:
    id: "play-button"

# Verify answer buttons are visible
# Default unlocked intervals: m3, M3, P4, P5
- assertVisible:
    id: "answer-m3"
- assertVisible:
    id: "answer-m3"
- assertVisible:
    id: "answer-p4"
- assertVisible:
    id: "answer-p5"

# Play the interval
- tapOn:
    id: "play-button"

# Wait for audio to finish and answering state (wait for specific text)
- extendedWaitUntil:
    visible:
      text: "Select your answer below"
    timeout: 5000

# Submit an answer (tap m3)
- tapOn:
    id: "answer-m3"

# Verify feedback state - should show NEXT button
- assertVisible:
    id: "next-button"

# Go to next question
- tapOn:
    id: "next-button"

# Verify progress updated (now 2/10)
- assertVisible:
    id: "progress-indicator"

# Close the exercise (goes back to Ear School menu)
- tapOn:
    id: "intervals-close-button"

# Close Ear School menu to return home
- tapOn:
    id: "ear-school-close-button"

# Verify we're back at home
- assertVisible:
    id: "home-header-title"
