appId: com.nagodasoft.scalescholar
---
# Test: Reset Progress functionality
# Verifies:
# - Can navigate to settings
# - Reset button is present
# - Can tap reset and return to home

- launchApp:
    clearState: true

# First, do some activity to accumulate XP
# Navigate to Ear School
- tapOn:
    id: "ear-school-card"

- assertVisible:
    id: "ear-school-header-title"

# Open Week 1
- tapOn:
    id: "week-1-card"

- assertVisible:
    id: "week-1-header-title"

# Open Lesson 1.1
- tapOn:
    id: "lesson-1-1-card"

# Play and answer a question
- tapOn:
    id: "play-button"

# Wait for answering state
- extendedWaitUntil:
    visible:
      id: "play-hint"
    timeout: 5000

# Submit an answer
- tapOn:
    text: "1"

# Wait for feedback
- extendedWaitUntil:
    visible:
      id: "next-button"
    timeout: 3000

# Close the exercise
- tapOn:
    id: "lesson-ear-school-1.1-close-button"

# Confirm leave
- extendedWaitUntil:
    visible:
      text: "Leave"
    timeout: 3000

- tapOn:
    text: "Leave"

# Back at week - close it
- tapOn:
    id: "week-1-close-button"

# Back at Ear School home - close it
- tapOn:
    id: "ear-school-close-button"

# Verify home screen
- assertVisible:
    id: "home-header-title"

# Navigate to Settings
- tapOn:
    id: "settings-button"

# Verify we're in Settings
- assertVisible:
    id: "settings-header-title"

# Look for reset button by scrolling down
- scrollUntilVisible:
    element:
      id: "reset-all-button"
    direction: DOWN
    timeout: 10000

- assertVisible:
    id: "reset-all-button"

# Tap reset
- tapOn:
    id: "reset-all-button"

# Close settings
- tapOn:
    id: "settings-close-button"

# Verify we're back at home
- assertVisible:
    id: "home-header-title"
